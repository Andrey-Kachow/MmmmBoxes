#!/usr/bin/env bash

# Create and activate virtual environment
python3 -m venv venv
source venv/bin/activate

# Install reqs
pip install --upgrade pip && pip install -r requirements.txt

export FLASK_APP=app/flaskr
export FLASK_ENV=development

# If "$PORT" is undefined, then `flask run` and run locally.
# Otherwise, export some flask variables needed to run on Heroku and then run.
if [ -z "$PORT" ]
then
    echo "Running flask locally!"
    flask run
else
    echo "Running flask in Heroku!"
    export FLASK_RUN_HOST=0.0.0.0
    export FLASK_RUN_PORT=$PORT
    flask run
fi
